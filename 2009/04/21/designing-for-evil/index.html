
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Designing For Evil - Chen Yangjian's Blog</title>
  <meta name="author" content="Chen Yangjian">

  
  <meta name="description" content="最近在 Coding Horror 上看到的这篇文章，Designing for Evil。 When you design your software, work under the assumption that some of your users
will be evil: out to &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://cyj.me/2009/04/21/designing-for-evil">
  <link href="/octo/favicon.png" rel="icon">
  <link href="/octo/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/octo/javascripts/modernizr-2.0.js"></script>
  <script src="/octo/javascripts/ender.js"></script>
  <script src="/octo/javascripts/octopress.js" type="text/javascript"></script>
  <link href="http://feeds.feedburner.com/dotnil" rel="alternate" title="Chen Yangjian's Blog" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-17751107-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/octo/">Chen Yangjian's Blog</a></h1>
  
    <h2>Carpe diem - Seize the day</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://feeds.feedburner.com/dotnil" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:cyj.me" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/octo/">Home</a></li>
  <li><a href="/octo/blog">Blog</a></li>
  <li><a href="/octo/archives">Archives</a></li>
  <li><a href="/octo/about">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Designing for Evil</h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-04-21T00:00:00+08:00" pubdate data-updated="true">Apr 21<span>st</span>, 2009</time>
        
         | <a href="#disqus_thread">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p>最近在 Coding Horror 上看到的这篇文章，<a href="http://www.codinghorror.com/blog/archives/001123.html">Designing for Evil</a>。</p>

<blockquote><p>When you design your software, work under the assumption that some of your users
will be evil: out to game the system, to defeat it at every turn, to cause interruption
and denial of service, to attack and humiliate other users, to fill your site with the vilest,
nastiest spam you can possibly imagine.</p></blockquote>

<p>该文提到 <a href="http://en.wikipedia.org/wiki/Craigslist">Craigslist</a> 与所谓黑客之间的无休止的争斗，
并引出上述的结论。这让我想到我前一阵做给同事们用的一个工作日志程序，姑且叫 Worklog 好了。</p>

<p>开发的原因很简单，组内每周需要向老大汇报一周工作进展及计划，原本的方式是 email，很是麻烦。
于是做了这个 Worklog，因为都是同事们使用，安全机制几乎没有，用户不需要登陆，
根据 IP 判断谁是谁（公司局域网固定 IP，并且有个机器编号），初次访问的时候设定名字，
之后就可以一直记录工作日志。</p>

<p>试运行第一天，全是叫 qwerty、asdf、1234 的，工作日志有 <code>................................''''''''''''\\\\\\\\\\\\\\\\---------.,,,,,,,,.||||||&amp;&amp;&amp;&amp;&amp;&amp;$$$$!!!@@@###^^^***</code>、有 <code>a'; DROP TABLE users;</code>，有特长的有空的等等。</p>

<p>全组总共也就10来号人，大家都是同事，同样都有如此问题。</p>

<p>无怪乎时代杂志的所谓百大最具影响力人物网络调查背后的形同虚设的安全工作要
<a href="http://www.codinghorror.com/blog/archives/001256.html">被别人耻笑</a>了。</p>

<blockquote><p>In early stages of the poll, Time.com didn&#8217;t have any authentication or validation
&#8211; the door was wide open to any client that wanted to stuff the ballot box.</p></blockquote>

<p>开始的时候，time.com 没有任何授权或者验证机制 —— 开门揖盗</p>

<blockquote><p>Soon afterward, it was discovered that the Time.com Poll didn&#8217;t even range check
its parameters to ensure that the ratings fell within the 1 to 100 range</p></blockquote>

<p>不久后，还被发现 time.com 连投票范围都没有检查，用户提交的评分并没有被限制在 UI 显示的 1-100 的范围之内。</p>

<blockquote><p>Shortly afterward, Time.com changed the protocol to attempt to authenticate
votes by requiring a key be appended to the poll submission URL. The key consisted
of an MD5 hash of the URL + a secret word (aka &#8216;the salt&#8217;). [hackers eventually]
discovered that the salt [..] was poorly hidden in Time.com&#8217;s voting flash application.
With the salt extracted, the autovoters were back online, rocking the vote.</p></blockquote>

<p>再不久后，time.com 改了协议，试着去使用密钥。密钥是 URL 与一个密文的 MD5 算值。
结果，所谓黑客们发现该密文只不过藏在该投票 swf 程序里头。然后，自动投票机又复活了~</p>

<p>还有些后来的并没有考虑透彻的 13秒 限制之类，这里就不细说了。</p>

<p>总之，随时想着你的网站是给撒旦用的，就行了。</p>

<p>题外话，关于代码也有个金科玉律。“随时想着你的代码将给一个拿着沙鹰的暴徒维护，而且他还知道你的住址。”</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Chen Yangjian</span></span>

      








  


<time datetime="2009-04-21T00:00:00+08:00" pubdate data-updated="true">Apr 21<span>st</span>, 2009</time>
      

<span class="categories">
  
    <a class='category' href='/categories/bug/'>Bug</a>, <a class='category' href='/categories/computer/'>Computer</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://cyj.me/2009/04/21/designing-for-evil/" data-via="dotnil" data-counturl="http://cyj.me/2009/04/21/designing-for-evil/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/octo/2009/04/17/jquery-for-designers/" title="Previous Post: jQuery for Designers">&laquo; jQuery for Designers</a>
      
      
        <a class="basic-alignment right" href="/octo/2009/04/21/linum-in-emacs/" title="Next Post: Emacs 里头显示行号">Emacs 里头显示行号 &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/octo/2012/04/07/xiamen/">正月里去厦门（一）</a>
      </li>
    
      <li class="post">
        <a href="/octo/2012/03/06/yet-another-site-moving/">再度搬家</a>
      </li>
    
      <li class="post">
        <a href="/octo/2012/03/04/jokes/">莞尔</a>
      </li>
    
      <li class="post">
        <a href="/octo/2012/03/01/js-unit-testing/">用 QUnit 做 JavaScript 单元测试</a>
      </li>
    
      <li class="post">
        <a href="/octo/2012/02/28/move-onto-octopress/">搬家到 Octopress</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/dotnil">@dotnil</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/octo/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'dotnil',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/octo/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("dotnil", 4, false);
    });
  </script>
  <script src="/octo/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/dotnil" class="twitter-follow-button" data-show-count="false">Follow @dotnil</a>
  
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Chen Yangjian -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'yicai';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://cyj.me/2009/04/21/designing-for-evil/';
        var disqus_url = 'http://cyj.me/2009/04/21/designing-for-evil/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
